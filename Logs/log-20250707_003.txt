2025-07-07 13:54:20.128 -05:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-07-07 13:54:20.184 -05:00 [INF] warn: 07/07/2025 13:54:20.183 CoreEventId.SensitiveDataLoggingEnabledWarning[10400] (Microsoft.EntityFrameworkCore.Infrastructure) 
      Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-07-07 13:54:21.330 -05:00 [INF] [SeedData] Rol 'Admin' ya existe.
2025-07-07 13:54:21.338 -05:00 [INF] [SeedData] Rol 'Planeador' ya existe.
2025-07-07 13:54:21.341 -05:00 [INF] [SeedData] Rol 'CEF' ya existe.
2025-07-07 13:54:21.344 -05:00 [INF] [SeedData] Rol 'Supervisor' ya existe.
2025-07-07 13:54:21.348 -05:00 [INF] [SeedData] Rol 'ADATM01' ya existe.
2025-07-07 13:54:21.350 -05:00 [INF] [SeedData] Rol 'ADCEF01' ya existe.
2025-07-07 13:54:21.353 -05:00 [INF] [SeedData] Rol 'ADCF01' ya existe.
2025-07-07 13:54:21.357 -05:00 [INF] [SeedData] Rol 'ADGRG01' ya existe.
2025-07-07 13:54:21.360 -05:00 [INF] [SeedData] Rol 'ADMTF01' ya existe.
2025-07-07 13:54:21.363 -05:00 [INF] [SeedData] Rol 'ADSER01' ya existe.
2025-07-07 13:54:21.366 -05:00 [INF] [SeedData] Rol 'ADSER02' ya existe.
2025-07-07 13:54:21.369 -05:00 [INF] [SeedData] Rol 'ADTH01' ya existe.
2025-07-07 13:54:21.373 -05:00 [INF] [SeedData] Rol 'ADTI01' ya existe.
2025-07-07 13:54:21.376 -05:00 [INF] [SeedData] Rol 'COCEF01' ya existe.
2025-07-07 13:54:21.401 -05:00 [INF] [SeedData] Rol 'COSTV01' ya existe.
2025-07-07 13:54:21.405 -05:00 [INF] [SeedData] Rol 'GRSER001' ya existe.
2025-07-07 13:54:21.409 -05:00 [INF] [SeedData] Rol 'SUPTV01' ya existe.
2025-07-07 13:54:21.511 -05:00 [INF] [SeedData] Usuario 'adminvcash' ya existe.
2025-07-07 13:54:21.543 -05:00 [INF] [SeedData] Usuario 'planeador1' ya existe.
2025-07-07 13:54:21.547 -05:00 [INF] [SeedData] Usuario 'planeador2' ya existe.
2025-07-07 13:54:21.550 -05:00 [INF] [SeedData] Usuario 'cef1' ya existe.
2025-07-07 13:54:21.553 -05:00 [INF] [SeedData] Usuario 'supervisor1' ya existe.
2025-07-07 13:54:21.556 -05:00 [INF] [SeedData] Iniciando seeding de permisos por sucursal...
2025-07-07 13:54:21.675 -05:00 [INF] [SeedData] Seeding de permisos por sucursal completado.
2025-07-07 13:54:21.680 -05:00 [INF] [SeedData] Iniciando seeding de permisos de perfiles y vistas...
2025-07-07 13:54:21.737 -05:00 [INF] [SeedData] Vistas creadas/actualizadas.
2025-07-07 13:54:21.775 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Admin.
2025-07-07 13:54:21.779 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Planeador.
2025-07-07 13:54:21.782 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol CEF.
2025-07-07 13:54:21.785 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Supervisor.
2025-07-07 13:54:21.794 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Admin.
2025-07-07 13:54:21.797 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Planeador.
2025-07-07 13:54:21.800 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol CEF.
2025-07-07 13:54:21.803 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Supervisor.
2025-07-07 13:54:21.897 -05:00 [INF] [SeedData] Seeding de permisos de perfiles y vistas completado.
2025-07-07 13:54:22.272 -05:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address https://127.0.0.1:7024: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-07-07 14:15:30.030 -05:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-07-07 14:15:30.132 -05:00 [INF] warn: 07/07/2025 14:15:30.131 CoreEventId.SensitiveDataLoggingEnabledWarning[10400] (Microsoft.EntityFrameworkCore.Infrastructure) 
      Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-07-07 14:15:32.096 -05:00 [INF] [SeedData] Rol 'Admin' ya existe.
2025-07-07 14:15:32.113 -05:00 [INF] [SeedData] Rol 'Planeador' ya existe.
2025-07-07 14:15:32.117 -05:00 [INF] [SeedData] Rol 'CEF' ya existe.
2025-07-07 14:15:32.122 -05:00 [INF] [SeedData] Rol 'Supervisor' ya existe.
2025-07-07 14:15:32.126 -05:00 [INF] [SeedData] Rol 'ADATM01' ya existe.
2025-07-07 14:15:32.130 -05:00 [INF] [SeedData] Rol 'ADCEF01' ya existe.
2025-07-07 14:15:32.133 -05:00 [INF] [SeedData] Rol 'ADCF01' ya existe.
2025-07-07 14:15:32.137 -05:00 [INF] [SeedData] Rol 'ADGRG01' ya existe.
2025-07-07 14:15:32.140 -05:00 [INF] [SeedData] Rol 'ADMTF01' ya existe.
2025-07-07 14:15:32.144 -05:00 [INF] [SeedData] Rol 'ADSER01' ya existe.
2025-07-07 14:15:32.148 -05:00 [INF] [SeedData] Rol 'ADSER02' ya existe.
2025-07-07 14:15:32.152 -05:00 [INF] [SeedData] Rol 'ADTH01' ya existe.
2025-07-07 14:15:32.155 -05:00 [INF] [SeedData] Rol 'ADTI01' ya existe.
2025-07-07 14:15:32.158 -05:00 [INF] [SeedData] Rol 'COCEF01' ya existe.
2025-07-07 14:15:32.163 -05:00 [INF] [SeedData] Rol 'COSTV01' ya existe.
2025-07-07 14:15:32.166 -05:00 [INF] [SeedData] Rol 'GRSER001' ya existe.
2025-07-07 14:15:32.169 -05:00 [INF] [SeedData] Rol 'SUPTV01' ya existe.
2025-07-07 14:15:32.253 -05:00 [INF] [SeedData] Usuario 'adminvcash' ya existe.
2025-07-07 14:15:32.257 -05:00 [INF] [SeedData] Usuario 'planeador1' ya existe.
2025-07-07 14:15:32.261 -05:00 [INF] [SeedData] Usuario 'planeador2' ya existe.
2025-07-07 14:15:32.265 -05:00 [INF] [SeedData] Usuario 'cef1' ya existe.
2025-07-07 14:15:32.269 -05:00 [INF] [SeedData] Usuario 'supervisor1' ya existe.
2025-07-07 14:15:32.275 -05:00 [INF] [SeedData] Iniciando seeding de permisos por sucursal...
2025-07-07 14:15:32.454 -05:00 [INF] [SeedData] Seeding de permisos por sucursal completado.
2025-07-07 14:15:32.464 -05:00 [INF] [SeedData] Iniciando seeding de permisos de perfiles y vistas...
2025-07-07 14:15:32.561 -05:00 [INF] [SeedData] Vistas creadas/actualizadas.
2025-07-07 14:15:32.608 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Admin.
2025-07-07 14:15:32.613 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Planeador.
2025-07-07 14:15:32.616 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol CEF.
2025-07-07 14:15:32.620 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Supervisor.
2025-07-07 14:15:32.631 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Admin.
2025-07-07 14:15:32.634 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Planeador.
2025-07-07 14:15:32.637 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol CEF.
2025-07-07 14:15:32.641 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Supervisor.
2025-07-07 14:15:32.765 -05:00 [INF] [SeedData] Seeding de permisos de perfiles y vistas completado.
2025-07-07 14:15:33.177 -05:00 [INF] Now listening on: https://localhost:7024
2025-07-07 14:15:33.179 -05:00 [INF] Now listening on: http://localhost:5006
2025-07-07 14:15:33.245 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-07 14:15:33.247 -05:00 [INF] Hosting environment: Development
2025-07-07 14:15:33.248 -05:00 [INF] Content root path: C:\Users\hamirrocha\source\repos\VCashApp
2025-07-07 14:15:33.767 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:15:33.830 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.Edit (VCashApp)'
2025-07-07 14:15:34.061 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:15:34.077 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:15:34.096 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:15:34.102 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "Edit". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:15:34.145 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Editar Ruta.
2025-07-07 14:15:34.230 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:15:34.234 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:15:34.236 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:15:34.244 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:15:34.257 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:15:34.260 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:15:34.262 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:15:34.265 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:15:34.269 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:15:34.274 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:15:34.277 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:15:34.279 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:15:34.281 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:15:34.286 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:15:34.292 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:15:34.295 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:15:34.297 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:15:34.300 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:15:34.305 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:15:34.320 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:15:34.991 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a /RutasDiarias/Edit/RA0000000018 | Respuesta: Acceso permitido | 
2025-07-07 14:15:35.159 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetListItemsWithValueField()
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateGroupsAndOptions(String optionLabel, IEnumerable`1 selectList, ICollection`1 currentValues)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateSelect(ViewContext viewContext, ModelExplorer modelExplorer, String optionLabel, String expression, IEnumerable`1 selectList, ICollection`1 currentValues, Boolean allowMultiple, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.<>c__DisplayClass30_0.<<ExecuteAsync>b__0>d.MoveNext() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 32
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.ExecuteAsync() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 16
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at VCashApp.Extentions.LogIpMiddleware.InvokeAsync(HttpContext context) in C:\Users\hamirrocha\source\repos\VCashApp\Extensions\LogIpMiddleware.cs:line 22
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-07 14:15:35.554 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:18:07.324 -05:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-07-07 14:18:07.444 -05:00 [INF] warn: 07/07/2025 14:18:07.443 CoreEventId.SensitiveDataLoggingEnabledWarning[10400] (Microsoft.EntityFrameworkCore.Infrastructure) 
      Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-07-07 14:18:09.944 -05:00 [INF] [SeedData] Rol 'Admin' ya existe.
2025-07-07 14:18:09.964 -05:00 [INF] [SeedData] Rol 'Planeador' ya existe.
2025-07-07 14:18:09.969 -05:00 [INF] [SeedData] Rol 'CEF' ya existe.
2025-07-07 14:18:09.975 -05:00 [INF] [SeedData] Rol 'Supervisor' ya existe.
2025-07-07 14:18:09.981 -05:00 [INF] [SeedData] Rol 'ADATM01' ya existe.
2025-07-07 14:18:09.986 -05:00 [INF] [SeedData] Rol 'ADCEF01' ya existe.
2025-07-07 14:18:09.992 -05:00 [INF] [SeedData] Rol 'ADCF01' ya existe.
2025-07-07 14:18:09.998 -05:00 [INF] [SeedData] Rol 'ADGRG01' ya existe.
2025-07-07 14:18:10.002 -05:00 [INF] [SeedData] Rol 'ADMTF01' ya existe.
2025-07-07 14:18:10.008 -05:00 [INF] [SeedData] Rol 'ADSER01' ya existe.
2025-07-07 14:18:10.014 -05:00 [INF] [SeedData] Rol 'ADSER02' ya existe.
2025-07-07 14:18:10.019 -05:00 [INF] [SeedData] Rol 'ADTH01' ya existe.
2025-07-07 14:18:10.025 -05:00 [INF] [SeedData] Rol 'ADTI01' ya existe.
2025-07-07 14:18:10.030 -05:00 [INF] [SeedData] Rol 'COCEF01' ya existe.
2025-07-07 14:18:10.036 -05:00 [INF] [SeedData] Rol 'COSTV01' ya existe.
2025-07-07 14:18:10.051 -05:00 [INF] [SeedData] Rol 'GRSER001' ya existe.
2025-07-07 14:18:10.058 -05:00 [INF] [SeedData] Rol 'SUPTV01' ya existe.
2025-07-07 14:18:10.244 -05:00 [INF] [SeedData] Usuario 'adminvcash' ya existe.
2025-07-07 14:18:10.248 -05:00 [INF] [SeedData] Usuario 'planeador1' ya existe.
2025-07-07 14:18:10.252 -05:00 [INF] [SeedData] Usuario 'planeador2' ya existe.
2025-07-07 14:18:10.256 -05:00 [INF] [SeedData] Usuario 'cef1' ya existe.
2025-07-07 14:18:10.261 -05:00 [INF] [SeedData] Usuario 'supervisor1' ya existe.
2025-07-07 14:18:10.265 -05:00 [INF] [SeedData] Iniciando seeding de permisos por sucursal...
2025-07-07 14:18:10.453 -05:00 [INF] [SeedData] Seeding de permisos por sucursal completado.
2025-07-07 14:18:10.461 -05:00 [INF] [SeedData] Iniciando seeding de permisos de perfiles y vistas...
2025-07-07 14:18:10.568 -05:00 [INF] [SeedData] Vistas creadas/actualizadas.
2025-07-07 14:18:10.632 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Admin.
2025-07-07 14:18:10.636 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Planeador.
2025-07-07 14:18:10.641 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol CEF.
2025-07-07 14:18:10.644 -05:00 [INF] [SeedData] Permisos RUD actualizados para rol Supervisor.
2025-07-07 14:18:10.656 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Admin.
2025-07-07 14:18:10.660 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Planeador.
2025-07-07 14:18:10.663 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol CEF.
2025-07-07 14:18:10.667 -05:00 [INF] [SeedData] Permisos RUDHIS actualizados para rol Supervisor.
2025-07-07 14:18:10.791 -05:00 [INF] [SeedData] Seeding de permisos de perfiles y vistas completado.
2025-07-07 14:18:11.282 -05:00 [INF] Now listening on: https://localhost:7024
2025-07-07 14:18:11.283 -05:00 [INF] Now listening on: http://localhost:5006
2025-07-07 14:18:11.335 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-07 14:18:11.337 -05:00 [INF] Hosting environment: Development
2025-07-07 14:18:11.338 -05:00 [INF] Content root path: C:\Users\hamirrocha\source\repos\VCashApp
2025-07-07 14:18:11.745 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:18:11.810 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.Edit (VCashApp)'
2025-07-07 14:18:12.085 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:18:12.102 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:18:12.122 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:18:12.129 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "Edit". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:18:12.178 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Editar Ruta.
2025-07-07 14:18:12.334 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:18:12.371 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:18:12.377 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:18:12.394 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:18:12.413 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:18:12.417 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:18:12.419 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:18:12.422 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:18:12.427 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:18:12.432 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:18:12.436 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:18:12.438 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:18:12.442 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:18:12.448 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:18:12.453 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:18:12.457 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:18:12.463 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:18:12.466 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:18:12.473 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:18:12.499 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:18:13.457 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a /RutasDiarias/Edit/RA0000000018 | Respuesta: Acceso permitido | 
2025-07-07 14:18:13.655 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetListItemsWithValueField()
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateGroupsAndOptions(String optionLabel, IEnumerable`1 selectList, ICollection`1 currentValues)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateSelect(ViewContext viewContext, ModelExplorer modelExplorer, String optionLabel, String expression, IEnumerable`1 selectList, ICollection`1 currentValues, Boolean allowMultiple, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.<>c__DisplayClass30_0.<<ExecuteAsync>b__0>d.MoveNext() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 32
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.ExecuteAsync() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 16
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at VCashApp.Extentions.LogIpMiddleware.InvokeAsync(HttpContext context) in C:\Users\hamirrocha\source\repos\VCashApp\Extensions\LogIpMiddleware.cs:line 22
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-07 14:18:13.911 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:19:14.535 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:19:14.575 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.Edit (VCashApp)'
2025-07-07 14:19:14.643 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:19:14.653 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:19:14.659 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:14.663 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "Edit". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:19:14.670 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Editar Ruta.
2025-07-07 14:19:14.683 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:19:14.685 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:19:14.688 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:14.692 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:14.697 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:14.701 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:19:14.703 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:19:14.706 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:14.710 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:14.718 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:14.721 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:19:14.723 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:19:14.725 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:14.730 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:14.736 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:14.740 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:19:14.741 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:19:14.744 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:19:14.747 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:19:14.749 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:19:14.884 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a /RutasDiarias/Edit/RA0000000018 | Respuesta: Acceso permitido | 
2025-07-07 14:19:14.902 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetListItemsWithValueField()
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateGroupsAndOptions(String optionLabel, IEnumerable`1 selectList, ICollection`1 currentValues)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateSelect(ViewContext viewContext, ModelExplorer modelExplorer, String optionLabel, String expression, IEnumerable`1 selectList, ICollection`1 currentValues, Boolean allowMultiple, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.<>c__DisplayClass30_0.<<ExecuteAsync>b__0>d.MoveNext() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 32
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.ExecuteAsync() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 16
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at VCashApp.Extentions.LogIpMiddleware.InvokeAsync(HttpContext context) in C:\Users\hamirrocha\source\repos\VCashApp\Extensions\LogIpMiddleware.cs:line 22
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-07 14:19:15.066 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:19:20.072 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:19:20.081 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.PlannerDashboard (VCashApp)'
2025-07-07 14:19:20.110 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.PlannerDashboard (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:19:20.118 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:19:20.123 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:20.128 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.PlannerDashboard (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "View". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:19:20.171 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Planner.
2025-07-07 14:19:20.181 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:19:20.182 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:19:20.184 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:20.187 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:20.191 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:20.195 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:19:20.197 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:19:20.199 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:20.202 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:20.206 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:20.209 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:19:20.213 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:19:20.217 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:20.220 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:20.224 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:20.234 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:19:20.236 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:19:20.238 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:19:20.239 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:19:20.241 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:19:20.359 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a Planner Dashboard | Cantidad de rutas: 15 | Respuesta: Acceso permitido | 
2025-07-07 14:19:20.685 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:19:21.566 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:19:21.575 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.PlannerDashboard (VCashApp)'
2025-07-07 14:19:21.598 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.PlannerDashboard (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:19:21.604 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:19:21.646 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:21.659 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.PlannerDashboard (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "View". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:19:21.668 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Planner.
2025-07-07 14:19:21.683 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:19:21.684 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:19:21.689 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:21.695 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:21.733 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:21.742 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:19:21.747 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:19:21.755 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:21.759 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:21.787 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:21.793 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:19:21.795 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:19:21.799 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:21.808 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:21.826 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:21.837 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:19:21.839 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:19:21.848 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:19:21.851 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:19:21.852 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:19:21.870 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a Planner Dashboard | Cantidad de rutas: 15 | Respuesta: Acceso permitido | 
2025-07-07 14:19:21.898 -05:00 [INF] Executing PartialViewResult, running view ~/Views/RutasDiarias/_RoutesTablePartial.cshtml.
2025-07-07 14:19:22.051 -05:00 [INF] Executed PartialViewResult - view ~/Views/RutasDiarias/_RoutesTablePartial.cshtml executed in 154.8195ms.
2025-07-07 14:19:22.764 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:19:22.771 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.Edit (VCashApp)'
2025-07-07 14:19:22.783 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:19:22.789 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:19:22.795 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:22.799 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "Edit". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:19:22.803 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Editar Ruta.
2025-07-07 14:19:22.816 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:19:22.818 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:19:22.821 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:22.825 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:22.832 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:22.836 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:19:22.838 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:19:22.842 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:22.848 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:22.853 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:22.857 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:19:22.862 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:19:22.864 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:19:22.868 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:19:22.873 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:19:22.879 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:19:22.882 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:19:22.884 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:19:22.886 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:19:22.888 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:19:22.981 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a /RutasDiarias/Edit/RA0000000018 | Respuesta: Acceso permitido | 
2025-07-07 14:19:22.989 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetListItemsWithValueField()
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateGroupsAndOptions(String optionLabel, IEnumerable`1 selectList, ICollection`1 currentValues)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateSelect(ViewContext viewContext, ModelExplorer modelExplorer, String optionLabel, String expression, IEnumerable`1 selectList, ICollection`1 currentValues, Boolean allowMultiple, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.<>c__DisplayClass30_0.<<ExecuteAsync>b__0>d.MoveNext() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 32
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.ExecuteAsync() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 16
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at VCashApp.Extentions.LogIpMiddleware.InvokeAsync(HttpContext context) in C:\Users\hamirrocha\source\repos\VCashApp\Extensions\LogIpMiddleware.cs:line 22
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-07 14:19:23.148 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:29:39.387 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:29:39.392 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.Edit (VCashApp)'
2025-07-07 14:29:39.412 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:29:39.417 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:29:39.421 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:29:39.423 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "Edit". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:29:39.426 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Editar Ruta.
2025-07-07 14:29:39.436 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:29:39.438 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:29:39.440 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:29:39.442 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:29:39.446 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:29:39.449 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:29:39.450 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:29:39.451 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:29:39.453 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:29:39.456 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:29:39.458 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:29:39.458 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:29:39.462 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:29:39.464 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:29:39.467 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:29:39.469 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:29:39.470 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:29:39.471 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:29:39.472 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:29:39.472 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:29:39.513 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a /RutasDiarias/Edit/RA0000000018 | Respuesta: Acceso permitido | 
2025-07-07 14:29:39.518 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetListItemsWithValueField()
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateGroupsAndOptions(String optionLabel, IEnumerable`1 selectList, ICollection`1 currentValues)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateSelect(ViewContext viewContext, ModelExplorer modelExplorer, String optionLabel, String expression, IEnumerable`1 selectList, ICollection`1 currentValues, Boolean allowMultiple, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.<>c__DisplayClass30_0.<<ExecuteAsync>b__0>d.MoveNext() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 32
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.ExecuteAsync() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 16
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at VCashApp.Extentions.LogIpMiddleware.InvokeAsync(HttpContext context) in C:\Users\hamirrocha\source\repos\VCashApp\Extensions\LogIpMiddleware.cs:line 22
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-07 14:29:39.631 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:33:33.274 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-07-07 14:33:33.283 -05:00 [INF] Executing endpoint 'VCashApp.Controllers.RutasDiariasController.Edit (VCashApp)'
2025-07-07 14:33:33.298 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Roles de usuario para permiso: Planeador.
2025-07-07 14:33:33.306 -05:00 [INF] | AuthFilter: Buscando permiso para rol 'Planeador' (Id: c6b2ed9a-c908-4864-a2f2-d47bc48fb366) para vista 'RUD'
2025-07-07 14:33:33.311 -05:00 [INF] | AuthFilter: Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:33:33.314 -05:00 [INF] | AuthFilter: VCashApp.Controllers.RutasDiariasController.Edit (VCashApp) | Usuario: planeador1 | IP: 0.0.0.1 | Resultado: Acceso concedido. TipoPermiso: "Edit". Vista: 'RUD'. Roles del usuario: Planeador.
2025-07-07 14:33:33.324 -05:00 [INF] DEPURACION VIEWBAGS: Iniciando SetCommonViewBagsAsync para Editar Ruta.
2025-07-07 14:33:33.335 -05:00 [INF] DEPURACION VIEWBAGS: Roles del usuario: Planeador
2025-07-07 14:33:33.337 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "View"
2025-07-07 14:33:33.341 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:33:33.344 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:33:33.352 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:33:33.356 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Ver concedido para rol Planeador.
2025-07-07 14:33:33.357 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Create"
2025-07-07 14:33:33.360 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:33:33.364 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:33:33.373 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:33:33.377 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Crear concedido para rol Planeador.
2025-07-07 14:33:33.379 -05:00 [INF] DEPURACION PERMISOS (Base): Iniciando HasPermisionForView. Roles recibidos: Planeador, Vista: RUD, Tipo Permiso: "Edit"
2025-07-07 14:33:33.384 -05:00 [INF] DEPURACION PERMISOS (Base): Procesando rol: Planeador
2025-07-07 14:33:33.387 -05:00 [INF] DEPURACION PERMISOS (Base): Rol 'Planeador' tiene ID: c6b2ed9a-c908-4864-a2f2-d47bc48fb366 (obtenido de la DB)
2025-07-07 14:33:33.391 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de perfil encontrado para RoleId: c6b2ed9a-c908-4864-a2f2-d47bc48fb366, CodVista: RUD. PuedeVer: true, PuedeCrear: true, PuedeEditar: true.
2025-07-07 14:33:33.394 -05:00 [INF] DEPURACION PERMISOS (Base): Permiso de Editar concedido para rol Planeador.
2025-07-07 14:33:33.396 -05:00 [INF] DEPURACION VIEWBAGS: hasRUDView: true, hasRUDCreate: true, hasRUDEdit: true
2025-07-07 14:33:33.400 -05:00 [INF] DEPURACION VIEWBAGS: userRoles.Contains("Planeador"): true
2025-07-07 14:33:33.401 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.IsAdmin: false
2025-07-07 14:33:33.403 -05:00 [INF] DEPURACION VIEWBAGS: Valor final de ViewBag.canEditPlaneador: true
2025-07-07 14:33:33.460 -05:00 [INF] | Usuario: planeador1 | Ip: 0.0.0.1 | Acción: Acceso a /RutasDiarias/Edit/RA0000000018 | Respuesta: Acceso permitido | 
2025-07-07 14:33:33.471 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetListItemsWithValueField()
   at Microsoft.AspNetCore.Mvc.Rendering.MultiSelectList.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateGroupsAndOptions(String optionLabel, IEnumerable`1 selectList, ICollection`1 currentValues)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GenerateSelect(ViewContext viewContext, ModelExplorer modelExplorer, String optionLabel, String expression, IEnumerable`1 selectList, ICollection`1 currentValues, Boolean allowMultiple, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.<>c__DisplayClass30_0.<<ExecuteAsync>b__0>d.MoveNext() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 32
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>g__Awaited|0_0(Task task, TagHelperExecutionContext executionContext, Int32 i, Int32 count)
   at AspNetCoreGeneratedDocument.Views_RutasDiarias_Edit.ExecuteAsync() in C:\Users\hamirrocha\source\repos\VCashApp\Views\RutasDiarias\Edit.cshtml:line 16
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at VCashApp.Extentions.LogIpMiddleware.InvokeAsync(HttpContext context) in C:\Users\hamirrocha\source\repos\VCashApp\Extensions\LogIpMiddleware.cs:line 22
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-07 14:33:33.691 -05:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The key {7bb33ef4-ee75-4865-bf27-40137277b93a} was not found in the key ring. For more information go to https://aka.ms/aspnet/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
