@model VCashApp.Models.ViewModels.CentroEfectivo.CefIncidentViewModel
@{
    int index = (int)ViewData["index"];
    var incidentTypes = (List<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>)ViewBag.IncidentTypes;
}

<tr>
    <td>
        <input type="hidden" name="Incidents[@index].Id" value="@Model.Id" />
        <input type="hidden" name="Incidents[@index].CefTransactionId" value="@Model.CefTransactionId" />
        <input type="hidden" name="Incidents[@index].CefContainerId" value="@Model.CefContainerId" />
        <input type="hidden" name="Incidents[@index].CefValueDetailId" value="@Model.CefValueDetailId" />
        <select name="Incidents[@index].IncidentType" class="form-control form-control-sm" asp-items="incidentTypes">
            <option value="">-- Tipo --</option>
        </select>
        <span asp-validation-for="IncidentType" class="text-danger"></span>
    </td>
    <td>
        <input type="number" step="0.01" name="Incidents[@index].AffectedAmount" value="@Model.AffectedAmount" class="form-control form-control-sm" />
        <span asp-validation-for="AffectedAmount" class="text-danger"></span>
    </td>
    <td>
        <input type="number" step="0.01" name="Incidents[@index].AffectedDenomination" value="@Model.AffectedDenomination" class="form-control form-control-sm" />
    </td>
    <td>
        <input type="number" name="Incidents[@index].AffectedQuantity" value="@Model.AffectedQuantity" class="form-control form-control-sm" />
    </td>
    <td>
        <textarea name="Incidents[@index].Description" class="form-control form-control-sm" rows="1">@Model.Description</textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </td>
    <td>
        <button type="button" class="btn btn-danger btn-sm" onclick="removeRow(this)">Eliminar</button>
    </td>
</tr>

<script id="incidentTemplate" type="text/template">
    <tr>
        <td>
            <input type="hidden" name="Incidents[0].Id" value="0" />
            <input type="hidden" name="Incidents[0].CefTransactionId" value="" />
            <input type="hidden" name="Incidents[0].CefContainerId" value="" />
            <input type="hidden" name="Incidents[0].CefValueDetailId" value="" />
            <select name="Incidents[0].IncidentType" class="form-control form-control-sm" asp-items="incidentTypes">
                <option value="">-- Tipo --</option>
            </select>
            <span data-valmsg-for="Incidents[0].IncidentType" class="text-danger"></span>
        </td>
        <td><input type="number" step="0.01" name="Incidents[0].AffectedAmount" class="form-control form-control-sm" /><span data-valmsg-for="Incidents[0].AffectedAmount" class="text-danger"></span></td>
        <td><input type="number" step="0.01" name="Incidents[0].AffectedDenomination" class="form-control form-control-sm" /></td>
        <td><input type="number" name="Incidents[0].AffectedQuantity" class="form-control form-control-sm" /></td>
        <td><textarea name="Incidents[0].Description" class="form-control form-control-sm" rows="1"></textarea><span data-valmsg-for="Incidents[0].Description" class="text-danger"></span></td>
        <td><button type="button" class="btn btn-danger btn-sm" onclick="removeRow(this)">Eliminar</button></td>
    </tr>
</script>